# Octo-STS Docker Compose Configuration
# Copy this file to .env before running the app-installer

# =============================================================================
# REQUIRED CONFIGURATION (set before running app-installer)
# =============================================================================

# GitHub organization where the app will be created (optional)
# If not set, the app will be created under your personal account
GITHUB_ORG=

# TLS mode: "on" for Let's Encrypt, "off" for edge termination (ngrok, LB, etc.)
TLS_MODE=off

# Email for Let's Encrypt certificate notifications (required when TLS_MODE=on)
TLS_EMAIL=admin@example.com

# =============================================================================
# AUTO-POPULATED BY APP-INSTALLER (do not edit manually)
# =============================================================================
# The following values are automatically set when you run the app-installer.
# STS_DOMAIN is extracted from the webhook URL entered during setup.
# Leave them as placeholder values - they will be replaced.

STS_DOMAIN=
GITHUB_APP_ID=
GITHUB_WEBHOOK_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
APP_SECRET_CERTIFICATE_ENV_VAR=

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# HTTP/HTTPS ports (defaults: 9000/443)
# Using 9000 allows sharing the same ngrok tunnel for both setup and runtime
# HTTP_PORT=9000
# HTTPS_PORT=443

# Enable metrics and tracing (default: false for docker deployment)
# METRICS=false

# Filter webhook events to specific organizations (comma-separated)
# GITHUB_WEBHOOK_ORGANIZATION_FILTER=my-org,another-org

# CloudEvents endpoint for observability
# EVENT_INGRESS_URI=https://events.example.com/ingress

# =============================================================================
# APP INSTALLER CONFIGURATION (for initial setup)
# =============================================================================

# Port for the app installer web UI (default: 9000)
# INSTALLER_PORT=9000

# The public URL where the installer is accessible (for GitHub OAuth redirect)
# This should match how you access the installer from your browser
# INSTALLER_REDIRECT_URL=http://localhost:9000

# Pre-configure the webhook URL in the manifest (optional)
# If not set, user will be prompted to enter it in the web UI
# INSTALLER_WEBHOOK_URL=https://sts.example.com/webhook

# GitHub URL (for GitHub Enterprise Server support, default: https://github.com)
# GITHUB_URL=https://github.com
