# =============================================================================
# Octo-STS AWS Lambda Distribution - Environment Variables
# =============================================================================
# These environment variables are used by the Lambda functions at runtime.
# They can be set directly or reference SSM Parameter Store ARNs.
#
# For app-installer integration, use STORAGE_MODE=aws-ssm and these values
# will be populated automatically in SSM Parameter Store.
# =============================================================================

# -----------------------------------------------------------------------------
# Required Configuration
# -----------------------------------------------------------------------------

# GitHub App ID (required)
# Can be a direct value or SSM ARN: arn:aws:ssm:region:account:parameter/path
GITHUB_APP_ID=123456

# GitHub App Private Key (required)
# PEM-encoded private key. Can be SSM ARN for secure storage.
APP_SECRET_CERTIFICATE_ENV_VAR=-----BEGIN RSA PRIVATE KEY-----...

# STS Domain for audience validation (required for STS Lambda)
# If using API Gateway without custom domain, use the API Gateway endpoint hostname
STS_DOMAIN=abcd1234.execute-api.us-east-1.amazonaws.com

# -----------------------------------------------------------------------------
# Webhook Configuration (for Webhook Lambda)
# -----------------------------------------------------------------------------

# GitHub Webhook Secret (required for webhook validation)
# Auto-generated by Terraform if not provided
GITHUB_WEBHOOK_SECRET=your-webhook-secret

# Organization Filter (optional)
# Comma-separated list of organizations to process webhooks for
# Leave empty to process all organizations
GITHUB_WEBHOOK_ORGANIZATION_FILTER=

# -----------------------------------------------------------------------------
# Optional Configuration
# -----------------------------------------------------------------------------

# HTTP Port (used internally by Lambda, typically 8080)
PORT=8080

# Metrics (disabled for Lambda - GCP-specific feature)
METRICS=false

# -----------------------------------------------------------------------------
# App-Installer SSM Storage Configuration
# -----------------------------------------------------------------------------
# When using app-installer with AWS SSM storage mode, set these:
#
# STORAGE_MODE=aws-ssm
# AWS_SSM_PARAMETER_PREFIX=/octo-sts/prod/
# AWS_SSM_KMS_KEY_ID=arn:aws:kms:region:account:key/key-id  (optional)
# AWS_SSM_TAGS={"Environment":"production"}  (optional)
#
# Then reference SSM ARNs in your Terraform configuration:
# github_app_config = {
#   app_id      = "arn:aws:ssm:us-east-1:123456789:parameter/octo-sts/prod/GITHUB_APP_ID"
#   private_key = "arn:aws:ssm:us-east-1:123456789:parameter/octo-sts/prod/APP_SECRET_CERTIFICATE_ENV_VAR"
# }
# =============================================================================
